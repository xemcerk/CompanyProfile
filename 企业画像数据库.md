# 企业画像数据库

## 使用说明（python api）

#### 参考链接：

1.  pymongo接口手册：https://api.mongodb.com/python/current/index.html
2.  MongoDB CRUD操作手册：https://docs.mongodb.com/manual/crud/

#### 调取所有数据

```python
import pymongo
import pandas as pd

# 连接到mongo server
client = pymongo.MongoClient(host='10.108.210.101')

# 提取数据库TechBigData中 集合CompanyProfile的所有数据
df = pd.DataFrame(list(client.TechBigData.CompanyProfile.find()))
```

#### 添加新值域

```python
# 创建test数据库与TestCollection集合
test_db = client.test
test_clc = test_db['TestCollection']

# 编写测试样例
test_docs = [
    {"f1":"a"},
    {"f1":"b"}
]

# 插入测试样例
test_clc.insert_many(test_docs)

# 获取欲插入的新field的值
new_field_values = [1,2]

# 获取TestCollction中的_id列表
id_list = list(test_clc.find({},{"_id":1}))

# 逐样例插入新值域
for i,id in enumerate(id_list):
    test_clc.update_one({"_id":id_list[i]['_id']},{"$set":{"new_field":new_field_values[i]}})
print(list(test_clc.find({})))
```

```shell
[{'_id': ObjectId('5e590d3cba53968d166f54b5'), 'f1': 'a', 'new_field': 1},
 {'_id': ObjectId('5e590d3cba53968d166f54b6'), 'f1': 'b', 'new_field': 2}]
```



## 数据字段说明

1.    comName # 企业名
2.    telNum # 联系电话
3.    email # 邮箱
4.    officialSite # 网址
5.    comAddr # 地址
6.    registerCapital # 注册资本
7.    paidupCapital # 实缴资本
8.    establishmentDate # 成立日期
9.    operatingStatus # 经营状态
10.    uniformSocialCreditCode # 统一社会信用代码
11.    businessRegNum # 工商注册号
12.    taxpayerID # 纳税人识别号
13.    orgCode # 组织机构代码
14.    comType # 公司类型
15.    industry # 行业
16.    approvalDate # 核准日期
17.    regAuth # 登记机关
18.    operatingPeriod # 营业期限
19.    taxpayerQualification # 纳税人资质
20.    staffSize # 人员规模
21.    insuredNum # 参保人数
22.    usedName # 曾用名
23.    engName # 英文名
24.    regAddr # 注册地址
25.    businessScope # 经营范围
26.    patentNum # 专利数量
27.    patentList # 专利列表 列表中的元素为字典 每一个字典都包含以下键
       1.    appliAnncDate # 申请公布日
       2.    patentName # 专利名称
       3.    appliNum # 申请号
       4.    appliAnncNum # 申请公布号
       5.    patentType # 专利类型
       6.    moreInfoRef# 详情链接
28.    softwareCopyRNum # 软件著作权数量
29.    softwareCopyRList # 软件著作权列表 列表中的元素为字典 每一个字典都包含以下键
       1.  regApprDate # 登记批准日期
       2.  softwareFullName # 软件全称
       3.  softwareAbbr # 软件简称
       4.  regNum # 登记号
       5.  classNum # 分类号
